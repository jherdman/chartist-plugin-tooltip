{"version":3,"file":"chartist-plugin-tooltip.min.js","sources":["chartist-plugin-tooltip.js"],"names":["root","factory","define","amd","returnExportsGlobal","exports","module","this","window","document","Chartist","displayTooltip","$point","$","tooltipText","options","tooltipFnc","attr","chart","Pie","label","next","length","text","value","isEmptyObject","currency","replace","$toolTip","html","show","hideTooltip","hide","defaultOptions","undefined","plugins","tooltip","extend","tooltipSelector","Bar","donut","$chart","container","append","find","on","bind","event","css","left","originalEvent","layerX","offsetX","width","top","layerY","offsetY","height","preventDefault","tooltips"],"mappings":";;;;;;CAAC,SAAUA,EAAMC,GACO,kBAAXC,SAAyBA,OAAOC,IAEzCD,UAAW,WACT,MAAQF,GAAKI,oBAAsBH,MAET,gBAAZI,SAIhBC,OAAOD,QAAUJ,IAEjBD,EAAK,6BAA+BC,KAEtCM,KAAM,WAyGN,MAlGC,UAASC,EAAQC,EAAUC,GAC1B,YAcA,SAASC,KACP,GAAIC,GAASC,EAAEN,MACXO,EAAc,EAElB,IAAIC,QAAQC,WACVF,EAAcC,QAAQC,WAAWJ,EAAOK,KAAK,YAAc,GAAIL,EAAOK,KAAK,iBACtE,CACL,GAAIL,EAAOK,KAAK,WACdH,GAAeF,EAAOK,KAAK,WAAa,WAIxC,IAAIC,gBAAiBR,GAASS,IAAK,CACjC,GAAIC,GAAQR,EAAOS,KAAK,YACpBD,GAAME,OAAS,IACjBR,GAAeM,EAAMG,OAAS,QAKpC,GAAIC,GAAQZ,EAAOK,KAAK,WACnBJ,GAAEY,cAAcV,QAAQW,YAC3BF,EAAQT,QAAQW,SAAWF,EAAMG,QAAQ,+BAAgC,QAE3Eb,GAAeU,EAGjBI,SAASC,KAAKf,GAAagB,OAG7B,QAASC,KACPH,SAASI,OA3CX,GAAIC,IACFP,SAAUQ,OA6CZxB,GAASyB,QAAUzB,EAASyB,YAC5BzB,EAASyB,QAAQC,QAAU,SAASrB,GAIlC,MAFAA,GAAUL,EAAS2B,UAAWJ,EAAgBlB,GAEvC,SAAiBG,GACtB,GAAIoB,GAAkB,WAClBpB,aAAiBR,GAAS6B,IAC5BD,EAAkB,UACTpB,YAAiBR,GAASS,MAGjCmB,EADEpB,EAAMH,QAAQyB,MACE,kBAEA,gBAItB,IAAIC,GAAS5B,EAAEK,EAAMwB,WACjBd,EAAWa,EACdE,OAAO,wCACPC,KAAK,qBACLZ,MAEDS,GAAOI,GAAG,aAAcP,EAAiB3B,EAAemC,KAAKvC,OAC7DkC,EAAOI,GAAG,aAAcP,EAAiB3B,EAAemC,KAAKvC,OAE7DkC,EAAOI,GAAG,aAAcP,EAAiBP,EAAYe,KAAKvC,OAC1DkC,EAAOI,GAAG,WAAYP,EAAiBP,EAAYe,KAAKvC,OAExDkC,EAAOI,GAAG,YAAa,SAASE,GAI9BnB,EAASoB,KACPC,MAAOF,EAAMG,cAAcC,QAAUJ,EAAMK,SAAWxB,EAASyB,QAAU,EAAI,GAC7EC,KAAMP,EAAMG,cAAcK,QAAUR,EAAMS,SAAW5B,EAAS6B,SAAW,OAK7EhB,EAAOI,GAAG,YAAa,SAASE,GAC9BA,EAAMW,sBAKZlD,OAAQC,SAAUC,UAEbA,SAASyB,QAAQwB","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], function () {\n      return (root.returnExportsGlobal = factory());\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    root['Chartist.plugins.tooltips'] = factory();\n  }\n}(this, function () {\n\n  /**\n   * Chartist.js plugin to display a data label on top of the points in a line chart.\n   *\n   */\n  /* global Chartist */\n  (function(window, document, Chartist) {\n    'use strict';\n\n    var defaultOptions = {\n      currency: undefined\n      // showTooltips: true,\n      // tooltipEvents: ['mousemove', 'touchstart', 'touchmove'],\n      // labelClass: 'ct-label',\n      // labelOffset: {\n      //   x: 0,\n      //   y: -10\n      // },\n      // textAnchor: 'middle'\n    };\n\n    function displayTooltip() {\n      var $point = $(this);\n      var tooltipText = '';\n\n      if (options.tooltipFnc) {\n        tooltipText = options.tooltipFnc($point.attr('ct:meta') || '', $point.attr('ct:value'));\n      } else {\n        if ($point.attr('ct:meta')) {\n          tooltipText += $point.attr('ct:meta') + '<br>';\n        } else {\n          // For Pie Charts also take the labels into account\n          // Could add support for more charts here as well!\n          if (chart instanceof Chartist.Pie) {\n            var label = $point.next('.ct-label');\n            if (label.length > 0) {\n              tooltipText += label.text() + '<br>';\n            }\n          }\n        }\n\n        var value = $point.attr('ct:value');\n        if (!$.isEmptyObject(options.currency)) {\n          value = options.currency + value.replace(/(\\d)(?=(\\d{3})+(?:\\.\\d+)?$)/g, \"$1,\");\n        }\n        tooltipText += value;\n      }\n\n      $toolTip.html(tooltipText).show();\n    }\n\n    function hideTooltip() {\n      $toolTip.hide();\n    }\n\n    Chartist.plugins = Chartist.plugins || {};\n    Chartist.plugins.tooltip = function(options) {\n\n      options = Chartist.extend({}, defaultOptions, options);\n\n      return function tooltip(chart) {\n        var tooltipSelector = '.ct-point';\n        if (chart instanceof Chartist.Bar) {\n          tooltipSelector = '.ct-bar';\n        } else if (chart instanceof Chartist.Pie) {\n          // Added support for donut graph\n          if (chart.options.donut){\n            tooltipSelector = '.ct-slice-donut';\n          }else{\n            tooltipSelector = '.ct-slice-pie';\n          }\n        }\n\n        var $chart = $(chart.container);\n        var $toolTip = $chart\n        .append('<div class=\"chartist-tooltip\"></div>')\n        .find('.chartist-tooltip')\n        .hide();\n\n        $chart.on('mouseenter', tooltipSelector, displayTooltip.bind(this));\n        $chart.on('touchstart', tooltipSelector, displayTooltip.bind(this));\n\n        $chart.on('mouseleave', tooltipSelector, hideTooltip.bind(this));\n        $chart.on('touchend', tooltipSelector, hideTooltip.bind(this));\n\n        $chart.on('mousemove', function(event) {\n          // For some reasons, on FF, we can't rely on event.offsetX and event.offsetY,\n          // that's why we prioritize event.originalEvent.layerX and event.originalEvent.layerY\n          // see https://github.com/gionkunz/chartist-js/issues/381\n          $toolTip.css({\n            left: (event.originalEvent.layerX || event.offsetX) - $toolTip.width() / 2 - 10,\n            top: (event.originalEvent.layerY || event.offsetY) - $toolTip.height() - 40\n          });\n        });\n\n        // Prevents scrolling during touch events\n        $chart.on('touchmove', function(event) {\n          event.preventDefault();\n        });\n      }\n    };\n\n  }(window, document, Chartist));\n\n  return Chartist.plugins.tooltips;\n\n}));\n"]}